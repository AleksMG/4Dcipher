<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–º–æ–Ω–æ—Ñ–æ–Ω–Ω—ã–π Base64 —Å –∫–ª—é—á–æ–º</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.2em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: monospace;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            margin: 25px 0;
        }
        
        button {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }
        
        .result h3 {
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-content {
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        
        .info {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        
        .info h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .comparison {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }
        
        .comparison > div {
            flex: 1;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .btn-group, .comparison {
                flex-direction: column;
            }
            
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê –û–º–æ–Ω–æ—Ñ–æ–Ω–Ω—ã–π Base64 —Å –∫–ª—é—á–æ–º</h1>
        
        <div class="info">
            <h3>‚ÑπÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <p>–û–º–æ–Ω–æ—Ñ–æ–Ω–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–∞–∫, —á—Ç–æ –æ–¥–∏–Ω –∏—Å—Ö–æ–¥–Ω—ã–π —Å–∏–º–≤–æ–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Ä–∞–∑–Ω—ã–º–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –ö–ª—é—á –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å - –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª—é—á –≤—Å–µ–≥–¥–∞ –¥–∞—ë—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
        </div>
        
        <div class="input-group">
            <label for="key">–ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:</label>
            <input type="text" id="key" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á" value="–º–æ–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-2024">
        </div>
        
        <div class="input-group">
            <label for="inputText">–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:</label>
            <textarea id="inputText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è">–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! –≠—Ç–æ —Ç–µ—Å—Ç –æ–º–æ–Ω–æ—Ñ–æ–Ω–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.</textarea>
        </div>
        
        <div class="btn-group">
            <button onclick="encode()">üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
            <button onclick="decode()">üîì –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
            <button onclick="generateKey()">üé≤ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</button>
        </div>
        
        <div class="input-group">
            <label for="outputText">–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
            <textarea id="outputText" readonly placeholder="–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å..."></textarea>
        </div>
        
        <div class="comparison">
            <div>
                <h3>üìä –û–±—ã—á–Ω—ã–π Base64</h3>
                <div class="result-content" id="normalBase64"></div>
            </div>
            <div>
                <h3>üé≠ –û–º–æ–Ω–æ—Ñ–æ–Ω–Ω—ã–π Base64</h3>
                <div class="result-content" id="homophonicBase64"></div>
            </div>
        </div>
    </div>

    <script>
        // –ë–∞–∑–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ–º–æ—Ñ–æ–Ω–æ–≤ - –∫–∞–∂–¥—ã–π –Ω–æ–º–µ—Ä (0-63) –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
        const baseHomophonicTable = {
            0: ['A', 'Œ±', '–ê', 'ƒÄ', 'ƒÑ'],
            1: ['B', 'Œ≤', '–ë', 'Œí', '·∏Ç'],
            2: ['C', 'Œ≥', '–¶', 'ƒÜ', 'ƒå'],
            3: ['D', 'Œ¥', '–î', 'ƒé', 'ƒê'],
            4: ['E', 'Œµ', '–ï', 'ƒí', 'ƒò'],
            5: ['F', 'Œ∂', '–§', '·∏û', '∆ë'],
            6: ['G', 'Œ∑', '–ì', 'ƒ¢', 'ƒû'],
            7: ['H', 'Œ∏', '–•', 'ƒ¶', '·∏®'],
            8: ['I', 'Œπ', '–ò', 'ƒ™', 'ƒÆ'],
            9: ['J', 'Œ∫', '–ô', 'ƒ¥', '…à'],
            10: ['K', 'Œª', '–ö', 'ƒ∂', '«®'],
            11: ['L', 'Œº', '–õ', 'ƒª', '≈Å'],
            12: ['M', 'ŒΩ', '–ú', '·πÄ', '·πÇ'],
            13: ['N', 'Œæ', '–ù', '≈Ö', '≈á'],
            14: ['O', 'Œø', '–û', '≈å', '√ò'],
            15: ['P', 'œÄ', '–ü', '·πñ', '∆§'],
            16: ['Q', 'œÅ', '“Ä', '«™', '…ä'],
            17: ['R', 'œÉ', '–†', '≈ò', '≈ñ'],
            18: ['S', 'œÑ', '–°', '≈ö', '≈†'],
            19: ['T', 'œÖ', '–¢', '≈§', '≈¢'],
            20: ['U', 'œÜ', '–£', '≈™', '≈Æ'],
            21: ['V', 'œá', '–í', '·πº', '∆≤'],
            22: ['W', 'œà', '–®', '≈¥', '·∫Ç'],
            23: ['X', 'œâ', '–©', '·∫å', 'Œß'],
            24: ['Y', 'œä', '–´', '≈∂', '·∫é'],
            25: ['Z', 'œã', '–ó', '≈ª', '≈Ω'],
            26: ['a', 'Œ¨', '–∞', 'ƒÅ', 'ƒÖ'],
            27: ['b', 'Œ≠', '–±', '·∏É', '∆Ä'],
            28: ['c', 'ŒÆ', '—Ü', 'ƒá', 'ƒç'],
            29: ['d', 'ŒØ', '–¥', 'ƒè', 'ƒë'],
            30: ['e', 'œå', '–µ', 'ƒì', 'ƒô'],
            31: ['f', 'œç', '—Ñ', '·∏ü', '∆í'],
            32: ['g', 'œé', '–≥', 'ƒ£', 'ƒü'],
            33: ['h', 'œê', '—Ö', 'ƒß', '·∏©'],
            34: ['i', 'œë', '–∏', 'ƒ´', 'ƒØ'],
            35: ['j', 'œï', '–π', 'ƒµ', '…â'],
            36: ['k', 'œñ', '–∫', 'ƒ∑', '«©'],
            37: ['l', 'œò', '–ª', 'ƒº', '≈Ç'],
            38: ['m', 'œö', '–º', '·πÅ', '·πÉ'],
            39: ['n', 'œú', '–Ω', '≈Ü', '≈à'],
            40: ['o', 'œû', '–æ', '≈ç', '√∏'],
            41: ['p', 'œ†', '–ø', '·πó', '∆•'],
            42: ['q', 'œ¢', '“Å', '«´', '…ã'],
            43: ['r', 'œ§', '—Ä', '≈ô', '≈ó'],
            44: ['s', 'œ¶', '—Å', '≈õ', '≈°'],
            45: ['t', 'œ®', '—Ç', '≈•', '≈£'],
            46: ['u', 'œ™', '—É', '≈´', '≈Ø'],
            47: ['v', 'œ¨', '–≤', '·πΩ', ' ã'],
            48: ['w', 'œÆ', '—à', '≈µ', '·∫É'],
            49: ['x', 'œ∞', '—â', '·∫ç', 'œá'],
            50: ['y', 'œ±', '—ã', '≈∑', '·∫è'],
            51: ['z', 'œ≤', '–∑', '≈º', '≈æ'],
            52: ['0', 'œ¥', 'Ÿ†', '‚Å∞', '‚ÇÄ'],
            53: ['1', 'œµ', 'Ÿ°', '¬π', '‚ÇÅ'],
            54: ['2', 'œ∂', 'Ÿ¢', '¬≤', '‚ÇÇ'],
            55: ['3', 'œ∑', 'Ÿ£', '¬≥', '‚ÇÉ'],
            56: ['4', 'œ∏', 'Ÿ§', '‚Å¥', '‚ÇÑ'],
            57: ['5', 'œπ', 'Ÿ•', '‚Åµ', '‚ÇÖ'],
            58: ['6', 'œ∫', 'Ÿ¶', '‚Å∂', '‚ÇÜ'],
            59: ['7', 'œª', 'Ÿß', '‚Å∑', '‚Çá'],
            60: ['8', 'œº', 'Ÿ®', '‚Å∏', '‚Çà'],
            61: ['9', 'œΩ', 'Ÿ©', '‚Åπ', '‚Çâ'],
            62: ['+', 'œæ', 'Ÿ™', '‚Å∫', '‚Çä'],
            63: ['/', 'œø', 'Ÿ´', 'À£', '‚Çã']
        };

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–æ–≥–æ seed –∏–∑ –∫–ª—é—á–∞
        function generateSeed(key) {
            let seed = 0;
            for (let i = 0; i < key.length; i++) {
                seed = (seed << 5) - seed + key.charCodeAt(i);
                seed = seed & seed; // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ
            }
            return Math.abs(seed);
        }

        // –ü—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–∞
        function createKeyedRandom(key) {
            const seed = generateSeed(key);
            let state = seed;
            
            return function() {
                state = (state * 1664525 + 1013904223) % 4294967296;
                return state / 4294967296;
            };
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–º–æ—Ñ–æ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–∞
        function createHomophonicTable(key) {
            const random = createKeyedRandom(key);
            const table = {};
            
            for (let i = 0; i < 64; i++) {
                // –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –æ–º–æ—Ñ–æ–Ω–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —á–∏—Å–ª–∞
                const homophones = [...baseHomophonicTable[i]];
                for (let j = homophones.length - 1; j > 0; j--) {
                    const k = Math.floor(random() * (j + 1));
                    [homophones[j], homophones[k]] = [homophones[k], homophones[j]];
                }
                table[i] = homophones;
            }
            
            return table;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
        function createReverseTable(homophonicTable) {
            const reverseTable = {};
            for (const [number, symbols] of Object.entries(homophonicTable)) {
                for (const symbol of symbols) {
                    reverseTable[symbol] = parseInt(number);
                }
            }
            return reverseTable;
        }

        // –û–º–æ–Ω–æ—Ñ–æ–Ω–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function homophonicEncode(data, key) {
            const homophonicTable = createHomophonicTable(key);
            const random = createKeyedRandom(key);
            
            // –°–Ω–∞—á–∞–ª–∞ –∫–æ–¥–∏—Ä—É–µ–º –≤ –æ–±—ã—á–Ω—ã–π Base64
            const standardBase64 = btoa(unescape(encodeURIComponent(data)));
            let result = '';
            
            for (let i = 0; i < standardBase64.length; i++) {
                const char = standardBase64[i];
                
                if (char === '=') {
                    result += '=';
                    continue;
                }
                
                // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –∞–ª—Ñ–∞–≤–∏—Ç–µ Base64
                const standardAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                const number = standardAlphabet.indexOf(char);
                
                if (number === -1) {
                    result += char;
                    continue;
                }
                
                // –í—ã–±–∏—Ä–∞–µ–º –æ–º–æ—Ñ–æ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–∞ –∏ –ø–æ–∑–∏—Ü–∏–∏
                const homophones = homophonicTable[number];
                const index = Math.floor(random() * homophones.length);
                result += homophones[index];
            }
            
            return result;
        }

        // –û–º–æ–Ω–æ—Ñ–æ–Ω–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function homophonicDecode(encodedData, key) {
            const homophonicTable = createHomophonicTable(key);
            const reverseTable = createReverseTable(homophonicTable);
            const standardAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
            
            let standardBase64 = '';
            
            for (let i = 0; i < encodedData.length; i++) {
                const char = encodedData[i];
                
                if (char === '=') {
                    standardBase64 += '=';
                    continue;
                }
                
                if (reverseTable[char] !== undefined) {
                    const number = reverseTable[char];
                    standardBase64 += standardAlphabet[number];
                } else {
                    standardBase64 += char;
                }
            }
            
            try {
                return decodeURIComponent(escape(atob(standardBase64)));
            } catch (e) {
                return "–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ";
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª—é—á–∞
        function generateKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()';
            let key = '';
            for (let i = 0; i < 16; i++) {
                key += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('key').value = key;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function encode() {
            const inputText = document.getElementById('inputText').value;
            const key = document.getElementById('key').value;
            
            if (!inputText) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            if (!key) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            const encoded = homophonicEncode(inputText, key);
            document.getElementById('outputText').value = encoded;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
            document.getElementById('normalBase64').textContent = btoa(unescape(encodeURIComponent(inputText)));
            document.getElementById('homophonicBase64').textContent = encoded;
        }

        function decode() {
            const inputText = document.getElementById('inputText').value;
            const key = document.getElementById('key').value;
            
            if (!inputText) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏');
                return;
            }
            
            if (!key) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            const decoded = homophonicDecode(inputText, key);
            document.getElementById('outputText').value = decoded;
            
            // –û—á–∏—â–∞–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏
            document.getElementById('normalBase64').textContent = '';
            document.getElementById('homophonicBase64').textContent = '';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById('key').addEventListener('input', function() {
            if (this.value && document.getElementById('inputText').value) {
                encode();
            }
        });
    </script>
</body>
</html>
